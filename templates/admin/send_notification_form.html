{% extends "admin/base_site.html" %}

{% block content %}
<div style="max-width: 800px; margin: 40px auto; padding: 20px;">
    <h1 style="margin-bottom: 20px; color: #333;">Send Notification to Applicants</h1>

    <div style="background: #f8f9fa; border-left: 4px solid #007bff; padding: 15px; margin-bottom: 20px;">
        <p style="margin: 0; font-weight: bold;">Selected Applicants: {{ applicants.count }}</p>
        <ul style="margin: 10px 0 0 20px;">
            {% for applicant in applicants %}
                <li>{{ applicant.user.get_full_name }} ({{ applicant.user.email }})</li>
            {% endfor %}
        </ul>
    </div>

    <form method="post">
        {% csrf_token %}

        <input type="hidden" name="action" value="{{ action_name }}">

        {% for applicant in applicants %}
            <input type="hidden" name="_selected_action" value="{{ applicant.pk }}">
        {% endfor %}

        <div style="margin-bottom: 20px;">
            <label for="notification_message" style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                Notification Message: <span style="color: red;">*</span>
            </label>
            <textarea
                name="notification_message"
                id="notification_message"
                rows="6"
                required
                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-family: inherit; font-size: 14px;"
                placeholder="Enter the notification message to send to selected applicants..."></textarea>
            <small style="display: block; margin-top: 5px; color: #666;">
                This message will be sent to all {{ applicants.count }} selected applicant(s).
            </small>
        </div>

        <div style="display: flex; gap: 10px;">
            <button
                type="submit"
                style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
                <i class="fa fa-paper-plane"></i> Send Notification
            </button>
            <a
                href="{% url 'admin:core_applicant_changelist' %}"
                style="padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px; font-weight: bold;">
                <i class="fa fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>

<style>
    button:hover {
        background: #0056b3 !important;
    }

    a:hover {
        background: #545b62 !important;
    }

    textarea:focus {
        outline: none;
        border-color: #007bff;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }
</style>
{% endblock %}
