{% extends 'layout/staff_dash_layout.html' %}
{% load static %}

{% block title %}Create Course{% endblock %}

{% block layout %}
<div class="w-full page-wrapper overflow-hidden">
    <main class="h-full overflow-y-auto w-full md:w-[90%] px-3 mx-auto py-4 bg-gradient-to-br rounded-md from-gray-200 to-gray-100">
        <div class="mb-6">
            <h1 class="font-semibold text-xl"><span class="text-slate-400">Courses /</span> Create New Course</h1>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
            <form method="POST" class="space-y-6">
                {% csrf_token %}
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Course Code</label>
                        <input type="text" name="code" required
                               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Course Title</label>
                        <input type="text" name="title" required
                               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Credits</label>
                        <input type="number" name="credits" required min="1" max="6"
                               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Level</label>
                        <select name="level" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            {% for level in levels %}
                            <option value="{{ level.name }}">{{ level.display_name }}</option>
                            {% empty %}
                            <option value="" disabled>No levels available</option>
                            {% endfor %}
                        </select>
                        {% if not levels %}
                        <p class="text-red-500 text-sm mt-1">Debug: No levels found in context</p>
                        {% endif %}
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Semester</label>
                        <select name="semester" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="first">First Semester</option>
                            <option value="second">Second Semester</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Academic Session</label>
                        <select name="academic_session" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            {% for session in academic_sessions %}
                            <option value="{{ session.id }}" {% if session.is_active %}selected{% endif %}>
                                {{ session.name }} {% if session.is_active %}(Active){% endif %}
                            </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="lg:col-span-3">
                        <label class="block text-sm font-medium text-gray-700">Course Description</label>
                        <textarea name="description" rows="3" 
                                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></textarea>
                    </div>
                </div>

                <div class="flex justify-end">
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Create Course
                    </button>
                </div>
            </form>
        </div>
    </main>
</div>
{% endblock %} 